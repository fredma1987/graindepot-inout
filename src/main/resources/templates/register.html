<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:include="head::head(${title})">
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>智能粮库云平台</title>

</head>

<body>
<script th:src="@{../js/huashi.js}"></script>
<script th:src="@{../js/d8.js}"></script>
<div th:replace="navbar::navbar"></div>
<div class="main-container" id="main-container">
    <div class="main-container-inner">
        <div class="main-content" id="main-content" style="margin-left:0px;width:100%">
            <div class="page-content" style="padding:10px 30px 0px">
                <div class="page-header">
                    <h1>
                        入库登记
                        <small>
                            <i class="icon-double-angle-right"></i>

                        </small>
                    </h1>
                </div>
                <!-- /.page-header -->

                <div class="row">
                    <div class="col-xs-12">
                        <!-- PAGE CONTENT BEGINS -->

                        <form class="form-horizontal" id="validation-form" role="form">
                            <div class="row">
                                <div class="col-xs-12 col-sm-4" style="border:1px solid #CCC;padding:3px;width:100%">
                                                <div style="width: 40%;height:100%;float: left">
                                                    <div style="width: 100%;height:50%;text-align: center;">
                                                        <div style="float:left;background-color: #E0FFFF;width: 70%;height:100%;text-align: center;">
                                                            <label style="height:100%;line-height: 250px;font-size: 40px;">
                                                                <img id="PhotoStr" src="" alt="证件照" style="width:150px;height:100%" /></label>
                                                        </div>
                                                        <div style="float:left;width: 30%;height:100%;text-align: center;padding-left:2px">
                                                            <div style="width: 100%;">
                                                                <label>证件其他信息</label>
                                                                <div style="width:100%;border:solid 1px #CCC;text-align: left;padding:5px">
                                                                    <div style="height:20px;">性别：<label id="gender">—&nbsp;—</label></div>
                                                                    <div style="height:20px">民族：<label id="nation">—&nbsp;—</label></div>
                                                                    <div style="height:20px">出生：<label id="bornDay">—&nbsp;—</label></div>
                                                                    <div style="height:20px">签发机关:</div>
                                                                    <div style="height:20px"><label id="certOrg">—&nbsp;—</label></div>
                                                                    <div style="height:20px">开始期限:</div>
                                                                    <div style="height:20px"><label id="effDate">—&nbsp;—</label></div>
                                                                    <div style="height:20px">结束期限:</div>
                                                                    <div style="height:20px"><label id="expDate">—&nbsp;—</label></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 100%;height:50%;text-align: center;">

                                                        <div style="float:left;width: 70%;height:100%;background-color: black;text-align: center;">
                                                            <label style="height:100%;line-height: 250px;font-size: 40px;color:#fff">监控画面</label>
                                                        </div>
                                                        <div style="float:left;width: 30%;height:100%;text-align: center;padding-left:2px">
                                                            <div style="width: 100%;">
                                                                <label>自动抓拍车牌列表</label>

                                                                <select class="form-control" id="active_trucknum"
                                                                        multiple="multiple" style="height: 160px">
                                                                    <option value="AL">苏BA3G19</option>
                                                                    <option value="AK">苏BH3433</option>
                                                                    <option value="AZ">苏A23232</option>
                                                                    <option value="AR">苏876822</option>
                                                                    <option value="CA">苏C89333</option>
                                                                    <option value="CO">苏897923</option>
                                                                </select>
                                                            </div>
                                                            <button class="btn btn-primary"
                                                                    style="margin-top: 10px;width:90%">
                                                                <i class="icon-camera"></i>
                                                                车牌识别
                                                            </button>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div style="width: 60%;height:100%;padding-left:20px;float: left">
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:90px;padding-left:0px"> 结算单模板： </label>
                                                            <div class="col-sm-4" style="width:130px;padding-left:0px">
                                                                <select id="printtempid" name="printtempid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 检斤方式： </label>
                                                            <div class="col-sm-4" style="width:130px;padding-left:0px">
                                                                <select id="onetomany" name="onetomany" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 结算类型： </label>
                                                            <div class="col-sm-4" style="width:150px;padding-left:0px">
                                                                <select id="settlemothod" name="settlemothod" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr style="margin-bottom:5px;margin-top:15px"/>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px;height:30px;vertical-align: top">
                                                            <div style="float: left;height:100%;vertical-align: top;margin-top: -3px;">
                                                                <label class="control-label"
                                                                       style="height:100%;line-height: 100%;vertical-align: top;">客户性质：</label>
                                                            </div>
                                                            <div class="radio"
                                                                 style="float: left;height:100%;vertical-align: top;margin-top: -8px">
                                                                <label>
                                                                    <input name="customtype" type="radio"
                                                                           value="1"
                                                                           class="ace" checked/>
                                                                    <span class="lbl"> 个人</span>
                                                                </label>
                                                                <label>
                                                                    <input name="customtype" type="radio"
                                                                           value="2"
                                                                           class="ace"/>
                                                                    <span class="lbl"> 单位</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 54px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 售粮单位：</label>
                                                            <div class="col-sm-4" style="width:300px;padding-left:0px">
                                                                <select id="traderid" name="traderid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr style="margin-bottom:5px;margin-top:15px"/>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <object id="CertCtl" type="application/cert-reader" width="0" height="0">
                                                                <p style="color:#FF0000;">控件不可用，可能未正确安装控件及驱动，或者控件未启用。<a onclick="download_Huashi()" style="text-decoration: underline;color:blue;cursor:pointer;">下载</a></p>
                                                            </object>
                                                            <label> *售粮人： </label>
                                                            <input type="text" id="sellmanname" name="sellmanname" placeholder=""/>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 身份证号： </label>
                                                            <input type="text" style="width:160px" id="sellmanidcard" name="sellmanidcard"
                                                                   placeholder=""/>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 联系电话： </label>
                                                            <input type="text" style="width:110px" id="sellmanphone" name="sellmanphone"
                                                                   placeholder=""/>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 联系地址： </label>
                                                            <input type="text" id="sellmanaddress" style="width:300px"
                                                                   placeholder=""/>
                                                        </div>
                                                        <a  class="btn btn-primary"
                                                                style="margin-left:15px;border:0" onclick="readCert()">
                                                            <i class="icon-credit-card"></i>
                                                            售粮人身份证
                                                        </a>
                                                        <a class="btn btn-primary"
                                                                style="margin-left:5px;border:0">
                                                            <i class="icon-globe"></i>
                                                            微信扫码
                                                        </a>
                                                    </div>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 车船类型：</label>
                                                            <div class="col-sm-4" style="width:150px;padding-left:0px">
                                                                <select id="trucktype" name="trucktype" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 车船号： </label>
                                                            <input type="text" id="trucknum" name="trucknum" style="width:100px"
                                                                   placeholder=""/>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px;display: none">
                                                            <label> 承运单位： </label>
                                                            <input type="text" id="carriercorp" name="carriercorp" style="width:220px"
                                                                   placeholder=""/>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" style="display: none">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 承运人： </label>
                                                            <input type="text" id="carriername" name="carriername" style="width:100px"
                                                                   placeholder=""/>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 承运人身份证： </label>
                                                            <input type="text" style="width:180px" id="carrieridcard" name="carrieridcard"
                                                                   placeholder=""/>
                                                        </div>
                                                        <button class="btn btn-primary"
                                                                style="margin-left:5px;border:0">
                                                            <i class="icon-credit-card"></i>
                                                            承运人身份证
                                                        </button>
                                                        <button class="btn btn-primary"
                                                                style="margin-left:5px;border:0">
                                                            <i class="icon-globe"></i>
                                                            微信扫码
                                                        </button>
                                                    </div>
                                                    <hr style="margin-bottom:5px;margin-top:15px"/>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 粮食品种： </label>
                                                            <div class="col-sm-4" style="width:150px;padding-left:0px">
                                                                <select id="grainid" name="grainid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 收获年度： </label>
                                                            <input type="text" id="producingyear" name="producingyear" style="width:50px"
                                                                   placeholder=""/>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 计划安排： </label>
                                                            <div class="col-sm-4" style="width:120px;padding-left:0px">
                                                                <select id="inplanid" name="inplanid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 合同号：</label>
                                                            <div class="col-sm-4" style="width:130px;padding-left:0px">
                                                                <select id="contractid" name="contractid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr style="margin-bottom:5px;margin-top:15px"/>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 包装方式：</label>
                                                            <div class="col-sm-4" style="width:100px;padding-left:0px">
                                                                <select id="packtype" name="packtype" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 总包数： </label>
                                                            <input type="text" id="packcount" name="packcount" style="width:50px"
                                                                   placeholder=""/>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 自报数量（千克）： </label>
                                                            <input type="text" id="selfreport" name="selfreport" style="width:80px"
                                                                   placeholder=""/>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 调入省份：</label>
                                                            <div class="col-sm-4" style="width:100px;padding-left:0px">
                                                                <select id="provinceid" name="provinceid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 市（州）：</label>
                                                            <div class="col-sm-4" style="width:100px;padding-left:0px">
                                                                <select id="cityid" name="cityid" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 原产地： </label>
                                                            <input type="text" id="soucearea" style="width:100px"
                                                                   placeholder=""/>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!--<div style="float: left;padding-left: 10px">
                                                            <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 入库原由：</label>
                                                            <div class="col-sm-4" style="width:150px;padding-left:0px">
                                                                <select id="inresontype" name="inresontype" class="form-control">
                                                                </select>
                                                            </div>
                                                        </div>-->
                                                        <div style="float: left;padding-left: 10px">
                                                            <label> 备注： </label>
                                                            <input type="text" id="remark" name="remark" style="width:200px"
                                                                   placeholder=""/>
                                                        </div>
                                                    </div>
                                                </div>
                                </div>
                                <!-- /span -->
                            </div>
                            <div class="row" style="float: right;padding-right: 12px">
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-arrow-left icon-on-left"></i>
                                    前一单
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-arrow-right icon-on-right"></i>
                                    后一单
                                </a>
                                <OBJECT id=rd codeBase="comRD800.cab" WIDTH="10" HEIGHT="0"
                                        classid="clsid:638B238E-EB84-4933-B3C8-854B86140668">
                                </OBJECT>
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-credit-card"></i>
                                    刷卡查单
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;" onclick="m1CardTest()">
                                    <i class="icon-save"></i>
                                    保存写卡
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;" onclick="toSave()">
                                    <i class="icon-save"></i>
                                    保存
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;padding-left:10px">
                                    <i class="icon-plus-sign"></i>
                                    新增
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;padding-left:10px">
                                    <i class="icon-undo"></i>
                                    取消
                                </a>
                            </div>
                        </form>
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.page-content -->
        </div>
        <!-- /.main-content -->
    </div>
    <!-- /.main-container-inner -->

</div>
<script  th:inline="javascript">
    var urlPrefix = "";
    var g_billid = [[${id}]];
    var g_item = [[${item}]];
    jQuery(function ($) {
        initGrain();
        initOnetomany();
        initSettlemothod();
        initPacktype();
        initTrucktype();
        /*定时刷新自动抓拍的车牌*/
        //window.setInterval("RefreshTrucknum()",3000);
    });
    function toSave() {
        $("#validation-form").bootstrapValidator('validate');//提交验证
        if ($("#validation-form").data('bootstrapValidator').isValid()) {//获取验证结果，如果成功，执行下面代码
            var param = turnArrayToJson($('form').serializeArray());
            if (g_billid) {
                param.billid = g_billid;
            }
            $.post("/graindepot-inout/register/edit", param, function (result) {
                alert("保存成功！");
            })


        }
    }
    function RefreshTrucknum(){
        $("#active_trucknum").append("<option value='CO'>苏897923</option>")
    }
    function initGrain() {
        $("#grainid").bootstrapSelect({
            url: urlPrefix + '/graindepot-base/selector/grainList',
            type: 'GET',
            valueField: 'grainid',
            textField: 'grainname'
        });
    }
    function initOnetomany() {
        var data = [{value: 1, text: "一单一车"}, {value: 0, text: "一单多车"}];
        $("#onetomany").bootstrapSelect({
            data: data,
            valueField: 'value',
            textField: 'text',
            defaultValue: 1
        });
    }
    function initSettlemothod() {
        var data = [{value: 1, text: "现金结算"}, {value: 2, text: "银行卡结算"}, {value: 3, text: "微信结算"}, {value: 4, text: "支付宝结算"}];
        $("#settlemothod").bootstrapSelect({
            data: data,
            valueField: 'value',
            textField: 'text',
            defaultValue: 1
        });
    }
    function initPacktype() {
        var data = [{value: 1, text: "散装"}, {value: 2, text: "包装"}];
        $("#packtype").bootstrapSelect({
            data: data,
            valueField: 'value',
            textField: 'text',
            defaultValue: 1
        });
    }
    function initInresontype() {
        var data = [{value: 1, text: "轮入"}, {value: 2, text: "其他收入"}];
        $("#inresontype").bootstrapSelect({
            data: data,
            valueField: 'value',
            textField: 'text',
            defaultValue: 1
        });
    }
    function initTrucktype() {
        var data = [{value: 1, text: "车辆"}, {value: 2, text: "船舶"}, {value: 3, text: "火车"}, {value: 99, text: "其他"}];
        $("#trucktype").bootstrapSelect({
            data: data,
            valueField: 'value',
            textField: 'text',
            defaultValue: 1
        });
    }

</script>
</body>
</html>