<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:include="head::head(${title})">
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script  th:inline="javascript">

    </script>
</head>

<body>
<div>
    <script th:src="@{../js/huashi.js}"></script>
    <script th:src="@{../js/d8.js}"></script>
    <div th:replace="navbar::navbar"></div>
    <div class="main-container-inner">
        <div class="main-content" id="main-content" style="float: left;margin-left:0px;width:100%">
            <div class="page-content" style="padding:10px 30px 0px">
                <div class="page-header">
                    <h1>
                        入库检斤
                        <small>
                            <i class="icon-double-angle-right"></i>

                        </small>
                    </h1>
                </div>
                <!-- /.page-header -->

                <div class="row">
                    <div class="col-xs-12">
                        <!-- PAGE CONTENT BEGINS -->

                        <form class="form-horizontal" id="validation-form" role="form">
                            <div class="row">
                                <div class="col-xs-12 col-sm-4" style="border:1px solid #CCC;padding:3px;width:100%">
                                    <div style="width: 40%;height:100%;float: left">
                                        <div style="width: 100%;height:50%;text-align: center;">
                                            <div style="border:solid 1px #CCC ;float:left;width: 50%;height:100%;background-color: black;text-align: center;">
                                                <label style="height:100%;line-height: 250px;font-size: 40px;color:#fff">监控画面1</label>
                                            </div>
                                            <div style="border:solid 1px #CCC ;float:left;width: 50%;height:100%;background-color: black;text-align: center;">
                                                <label style="height:100%;line-height: 250px;font-size: 40px;color:#fff">监控画面2</label>
                                            </div>
                                        </div>
                                        <div style="width: 100%;height:50%;text-align: center;">

                                            <div style="border:solid 1px #CCC ;float:left;width: 50%;height:100%;background-color: black;text-align: center;">
                                                <label style="height:100%;line-height: 250px;font-size: 40px;color:#fff">监控画面3</label>
                                            </div>
                                            <div style="border:solid 1px #CCC ;float:left;width: 50%;height:100%;background-color: black;text-align: center;">
                                                <label style="height:100%;line-height: 250px;font-size: 40px;color:#fff">监控画面4</label>
                                            </div>
                                        </div>

                                    </div>
                                    <div style="width: 60%;height:100%;padding-left:20px;float: left">
                                        <div class="form-group">
                                            <div class="widget-body"
                                                 style="float: left;width: 180px;height:60px;border-top: 1px solid #CCC">
                                                <div class="widget-main padding-6" style="height: 55px">
                                                    <div class="alert alert-info"
                                                         style="font-size: 24px;height:48px;line-height:48px;padding:2px;background-color:#06f;color:#fff;">
                                                        <span id="weight" name="weight" id="weight">
                                                            12000
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <label style="padding-left:10px;float: left;display: block;font-size: 24px;line-height: 55px">Kg</label>
                                        </div>
                                        <hr style="margin-bottom:5px;margin-top:5px"/>
                                        <div class="form-group">
                                            <div style="float: left;padding-left: 19px">
                                                <label style="display:block;float:left;"> 登记流水号： </label>
                                                <input type="text" id="billcode" name="billcode" style="width:125px"
                                                       placeholder=""/>
                                            </div>
                                            <div style="float: left;padding-left: 10px">
                                                <label style="float: left;padding-left:42px"> 仓房号： </label>
                                                <div class="col-sm-4" style="width:125px;padding-left:0px">
                                                    <select id="storageid" name="storageid" class="form-control">
                                                    </select>
                                                </div>
                                            </div>
                                            <div style="float: left;padding-left: 24px">
                                                <label> 毛重：</label>
                                                <input type="text" id="grossweight" name="grossweight" style="width:80px"/>
                                            </div>
                                            <div style="float: left;padding-left: 10px;height:29.4px;line-height: 29.4px">
                                                <span class="label label-primary arrowed" onclick="setGrossWeight()" style="cursor:pointer;vertical-align: middle">毛重</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div style="float: left;padding-left: 47px">
                                                <label style="display:block;float:left;"> 车牌号： </label>
                                                <input type="text" id="trucknum" name="trucknum" style="width:125px"
                                                       placeholder=""/>
                                            </div>
                                            <div style="float: left;padding-left: 38px">
                                                <label class="col-sm-4 control-label no-padding-right"
                                                       style="width:70px;padding-left:0px"> 粮食品种： </label>
                                                <div class="col-sm-4" style="width:125px;padding-left:0px">
                                                    <select id="grainid" name="grainid" class="form-control">
                                                    </select>
                                                </div>
                                            </div>
                                            <div style="float: left;padding-left: 24px">
                                                <label> 皮重：</label>
                                                <input type="text" id="tareweight" name="tareweight" style="width:80px"/>
                                            </div>
                                            <div style="float: left;padding-left: 10px;height:29.4px;line-height: 29.4px">
                                                <span class="label label-primary arrowed"  onclick="setTareWeight()" style="cursor:pointer;vertical-align: middle">皮重</span>
                                            </div>

                                        </div>
                                        <div class="form-group">
                                            <div style="float: left;padding-left: 61px">
                                                <label style="display:block;float:left;"> 货主： </label>
                                                <input type="text" id="sellmanname" name="sellmanname" style="width:125px"
                                                       placeholder=""/>
                                            </div>
                                            <div style="float: left;padding-left: 38px">
                                                <label class="col-sm-4 control-label no-padding-right" style="width:70px;padding-left:0px"> 粮食性质：</label>
                                                <div class="col-sm-4" style="width:125px;padding-left:0px">
                                                    <select id="grainattrid" name="grainattrid" class="form-control">
                                                    </select>
                                                </div>
                                            </div>
                                            <div style="float: left;padding-left: 24px">
                                                <label> 净重：</label>
                                                <input type="text" id="netweight" name="netweight" style="width:80px"/>
                                            </div>
                                            <div style="float: left;padding-left: 10px;height:29.4px;line-height: 29.4px">
                                                <label style="display:block;float:left;color:red"> =(毛重-皮重)</label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div style="float: left;padding-left: 5px">
                                                <label style="display:block;float:left;">水分增加扣率： </label>
                                                <input type="text" id="wdeduratex" name="wdeduratex" style="width:125px"
                                                       placeholder=""/>
                                            </div>
                                            <div style="float: left;padding-left: 10px">
                                                <label style="display:block;float:left;">杂质增加扣率： </label>
                                                <input type="text" id="ideduratex" name="ideduratex" style="width:110px"
                                                       placeholder=""/>
                                            </div>
                                            <div style="float: left;padding-left: 11px">
                                                <label> 增加扣重：</label>
                                                <input type="text" id="extradedu" name="extradedu" style="width:80px"/>
                                            </div>
                                        </div>
                                        <hr style="margin-bottom:5px;margin-top:5px"/>
                                        <div class="col-xs-12">
                                            <div class="table-responsive">
                                                    <table id="myTable" style="width:100%" class="table table-striped table-bordered table-hover">
                                                        <thead>
                                                        <tr>
                                                            <th class="center" style="width: 20px"></th>
                                                            <th class="center" style="width: 20px;">
                                                                <label>
                                                                    <input id="CK" type="checkbox" class="ace"/>
                                                                    <span class="lbl"></span>
                                                                </label>
                                                            </th>
                                                            <th style="width: 200px">登记流水号</th>
                                                            <th style="width: 100px">车牌号</th>
                                                            <th style="width: 100px">货主</th>
                                                            <th style="width: 100px">皮重状态</th>
                                                            <th style="width: 100px">毛重状态</th>
                                                            <th style="width: 100px">操作</th>
                                                        </tr>
                                                        </thead>
                                                    </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /span -->
                            </div>
                            <div class="row" style="float: right;padding-right: 12px">
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-arrow-left icon-on-left"></i>
                                    前一单
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-arrow-right icon-on-right"></i>
                                    后一单
                                </a>
                                <OBJECT id=rd codeBase="comRD800.cab" WIDTH="10" HEIGHT="0"
                                        classid="clsid:638B238E-EB84-4933-B3C8-854B86140668">
                                </OBJECT>
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-credit-card"></i>
                                    刷卡查单
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-save"></i>
                                    保存写卡
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;">
                                    <i class="icon-save"></i>
                                    保存
                                </a>
                                <a class="btn btn-success" style="border: 0;width: 120px;padding-left:10px">
                                    <i class="icon-undo"></i>
                                    取消
                                </a>
                            </div>
                        </form>
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.page-content -->
        </div>
        <!-- /.main-content -->
    </div>
    <!-- /.main-container-inner -->

</div>
<!-- /.main-container -->


<script type="text/javascript">
    var theTable;
    var param;
    $(document).ready(function () {
        comm_initGrain();
        comm_initGrainattr();
        comm_initStorage(param);
        //param todo
        query(param);
    });
    function query(param) {
        theTable = $('#myTable').bootstrapTable({
            //数据来源（包括处理分页，排序，过滤） ，即url，action，接口，等等
            ajax: {
                url: "/graindepot-inout/weight/newInPageList",
                data: param,
                type: "GET"
            },
            columns: [
                {title:"登记流水号", data: "billcode"},
                {title:"车牌号", data: "trucknum"},
                {title: "货主", data: "sellmanname"},
                {
                    title: "毛重状态",
                    data: "gwstate",
                    render: function (data, type, row) {
                        if(data==1){
                            return '<span class="label label-sm label-success">已称重</span>';
                        }else{
                            return '<span class="label label-sm label-warning">未称重</span>';
                        }

                    }
                },
                {
                    title: "皮重状态",
                    data: "tarestate",
                    render: function (data, type, row) {
                        if(data==1){
                            return '<span class="label label-sm label-success">已称重</span>';
                        }else{
                            return '<span class="label label-sm label-warning">未称重</span>';
                        }

                    }
                },
                {
                    title: "操作",
                    data: "billid",
                    render: function (data,type,row){
                        var obj=encodeURI(JSON.stringify(row));
                        return '<div class="visible-md visible-lg hidden-sm hidden-xs action-buttons">'+
                                    /*'<a class="blue" href="javascript:doView('+'\''+obj+'\')">'+
                                        '<i class="icon-zoom-in bigger-130"></i>'+
                                    '</a>'+*/
                                    '<a class="green" href="javascript:doEdit('+'\''+obj+'\')">'+
                                        '<i class="icon-pencil bigger-130"></i>'+
                                    '</a>'+
                                '</div>';
                    }
                }
            ]
        });
    }
    function doEdit(obj){
        var obj=JSON.parse(decodeURI(obj));
        $("#billcode").val(obj.billcode);
        $("#storageid").val(obj.storageid);
        $("#grossweight").val(obj.grossweight);
        $("#tareweight").val(obj.tareweight);
        $("#netweight").val(obj.netweight);
        $("#sellmanname").val(obj.sellmanname);
        $("#trucknum").val(obj.trucknum);
        $("#extradedu").val(obj.extradedu);
        $("#storageid").bootstrapSelect("setValue", obj.storageid);
        $("#grainid").bootstrapSelect("setValue", obj.grainid);
        $("#grainattrid").bootstrapSelect("setValue", obj.grainattrid);

        //查询保管员增加扣率
        var param={"billid":obj.billid};
        var url="/graindepot-inout/inspect/selectById";
        var data=getDataJson(url,param);
        if(data!=undefined){
            $("#wdeduratex").val(data.wdeduratex);
            $("#ideduratex").val(data.ideduratex);
        }else{
            $("#wdeduratex").val("");
            $("#ideduratex").val("");
        }
    }
    function doView(obj){

    }
    function  setGrossWeight(){
        $("#grossweight").val($("#weight").text().trim());
    }
    function  setTareWeight(){
        $("#tareweight").val($("#weight").text().trim());
        var grossweight=$("#grossweight").val();
        var tareweight=$("#tareweight").val();
        $("#netweight").val(grossweight-tareweight);
    }
</script>
</body>
</html>